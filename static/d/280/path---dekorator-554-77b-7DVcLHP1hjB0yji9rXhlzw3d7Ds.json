{"data":{"site":{"siteMetadata":{"title":"HLipinski devlog","author":"Hubert Lipinski"}},"markdownRemark":{"id":"7e185107-d257-5f5e-8e73-a4d0236a001a","excerpt":"Problem:Chcemy dodać do obiektu nowe zachowanie, jednak nie chcemy używać w tym celu dziedziczenia.Dekorator pozwala na rozszerzanie obiektów bez potrzeby…","html":"<h6>Problem:</h6>\n<p>Chcemy dodać do obiektu nowe zachowanie, jednak nie chcemy używać w tym celu dziedziczenia.</p>\n<p><strong>Dekorator</strong> pozwala na rozszerzanie obiektów bez potrzeby dziedziczenia, dzięki czemu zyskujemy elastyczność w definiowaniu dowolnej ilości nowych cech.</p>\n<p>Przykład użycia tego wzorca znajduje się w JDK w pakiecie <em>java.io</em>:</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/74a95983f59fe91f77db52165f92a01f/bf224/image1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 45.638432364096076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACTUlEQVQoz42QTUzTYBjH2ylcjJiAHozEeNA7iYk3r3r1ZognvHvRmBgTE08mGA/EBBh+DJHIJEOCoATZxgYCY8I2bDvYd7vSdv3Y3n7so2BZHzs96EGNv+Sff97n482TP6YUPuFCdhFPJ2bwzeXXOJLpI5iDqqKLzWYTKpUKtEAI3WnVFYlt08sMTm5H8IX5WTy6HsRXQh9xnvmKO1PYX/GM+c7ygjig6caAKCnDWzHiMvY/cF8edJTj9zo2Z26emHja2/V2qO/k9MiNrv7bPZ1Ou93R0ZZ7H104fr/v9DGWmry6L4dmEbMwxZBTU9zu7DuGeu9DxcC8ra72YkjczecyVH43mSgoQprm6EQ+n03mchmyUGIJhmcIOrWzXcymtmkmn0yr/MaKUaGBYygoSzTAfgGgEXdCYcHWIk8wAB1+UQOwWpnZP2Wrjh/A75T3NkixtFfmOcbUVFRvqOk6GFEd6nFndfUhZopBd0NccpvSktvg/O70ltediXndqc03I2J2btBG4ceH5WD/NznQr7Pzgzw1fmXu2bVTixO3zvuGrnf7J++eg/rcGWgudAN42/+ZL6BgZzETGU5Ra8+JWPiFUIi8VLiEJ02tj6bI9VeGTHq4fGSUiIXGMjtRD5sKjGMGv+xCbNilccsumQ661vyjrp2t6bbWh1LuwyW1IoAoSqDpVYCmCmZNBqEkgmE48dgG1DQBSs5b02twUGXhj5eZUsjV8kbJ33OoxU27ShxClbTQ3oolZAOWUvz8Q0LWb5lK1IIa4Shp7cth6zviz8qnToBwBgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"Diagram 1\"\n        title=\"\"\n        src=\"/static/74a95983f59fe91f77db52165f92a01f/b9e4f/image1.png\"\n        srcset=\"/static/74a95983f59fe91f77db52165f92a01f/cf440/image1.png 148w,\n/static/74a95983f59fe91f77db52165f92a01f/d2d38/image1.png 295w,\n/static/74a95983f59fe91f77db52165f92a01f/b9e4f/image1.png 590w,\n/static/74a95983f59fe91f77db52165f92a01f/bf224/image1.png 791w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>Klasa <em>FilterInputStream</em> spełnia tutaj 2 funkcje:</p>\n<ul>\n<li>dostarcza pole typu <em>InputStream</em>, gdzie będzie wstrzyknięty obiekt dekorowany,</li>\n<li>zapewnia, żeby każdy z dekoratorów był podtypem klasy <em>InputStream</em> (podobnie jak obiekt dekorowany).</li>\n</ul>\n<p>Klasa abstrakcyjna:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">InputStream</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Closeable</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Obiekt dekorowany:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ByteArrayInputStream</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">InputStream</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Dekorator abstrakcyjny:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FilterInputStream</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">InputStream</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">volatile</span> <span class=\"token class-name\">InputStream</span> in<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token class-name\">FilterInputStream</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">InputStream</span> in<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>in <span class=\"token operator\">=</span> in<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Implementacja dekoratora:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BufferedInputStream</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">FilterInputStream</span> <span class=\"token punctuation\">{</span>\n\t\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">BufferedInputStream</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">InputStream</span> in<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">(</span>in<span class=\"token punctuation\">,</span> DEFAULT_BUFFER_SIZE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n        \n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">BufferedInputStream</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">InputStream</span> in<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> size<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>in<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>size <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Buffer size &lt;= 0\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\tbuf <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span>size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Dzięki zgodności typów (wszystko jest podtypem <em>InputStream</em>) możemy jeden obiekt dekorować wielokrotnie, czyli:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">InputStream</span> in <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LineNumberInputStream</span><span class=\"token punctuation\">(</span>\n\t\t<span class=\"token keyword\">new</span> <span class=\"token class-name\">BufferedInputStream</span><span class=\"token punctuation\">(</span>\n\t\t\t\t<span class=\"token keyword\">new</span> <span class=\"token class-name\">ByteArrayInputStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>i to jest prawdziwą potęgą tego wzorca - możemy stworzyc obiekt będący dowolną kombinacją różnych, nadpisanych przez nas zachowań.</p>","frontmatter":{"title":"Wzorzec Dekorator","date":"02-06-2019"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/dekorator/","previous":{"fields":{"slug":"/hello-world/"},"frontmatter":{"title":"Hello World"}},"next":{"fields":{"slug":"/hoisting/"},"frontmatter":{"title":"Czym jest hoisting?"}}}}